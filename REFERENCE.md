# Reference
<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

**Classes**

_Public Classes_

* [`autofs`](#autofs): Manage the installation and configuration of `autofs` and ensure
* [`autofs::config::pki`](#autofsconfigpki): This class controls all pki related articles for autofs

_Private Classes_

* `autofs::config`: Manages `autofs` global configuration
* `autofs::install`: Manages installation of autofs
* `autofs::ldap_auth`: Set up the ``autofs_ldap_auth.conf`` file
* `autofs::service`: Manage autofs service

**Defined types**

* [`autofs::map`](#autofsmap): Add an auto.master entry file and map file
* [`autofs::map::entry`](#autofsmapentry): Add an entry to the map specified in ``$name``  THIS IS DEPRECATED.  Use `autofs::mapfile` or `autofs::map` instead.  The map file will be cr
* [`autofs::map::master`](#autofsmapmaster): Add a `$name.autofs` master entry file to `$autofs::master_conf_dir`
* [`autofs::mapfile`](#autofsmapfile): Create an autofs map file
* [`autofs::masterfile`](#autofsmasterfile): Add a `$name.autofs` master entry file to `$autofs::master_conf_dir`

**Data types**

* [`Autofs::Authtype`](#autofsauthtype): 
* [`Autofs::Directmapping`](#autofsdirectmapping): Single direct file system mapping that can be specified in an autofs map file
* [`Autofs::Indirectmapping`](#autofsindirectmapping): Single indirect file system mapping that can be specified in an autofs map file
* [`Autofs::Logging`](#autofslogging): automounter log level
* [`Autofs::Mapspec`](#autofsmapspec): Specification for parameters needed to create an autofs::map
* [`Autofs::Maptype`](#autofsmaptype): Map type for an auto.master entry

## Classes

### autofs

its service is running.

* **See also**
autofs.conf

#### Parameters

The following parameters are available in the `autofs` class.

##### `timeout`

Data type: `Integer`

Sets the 'timeout' parameter in the 'autofs' section of /etc/autofs.conf

Default value: 600

##### `negative_timeout`

Data type: `Optional[Integer]`

See: auto.master(5) -> GENERAL SYSTEM DEFAULTS CONFIGURATION -> NEGATIVE_TIMEOUT

Default value: `undef`

##### `mount_wait`

Data type: `Optional[Integer]`

See: auto.master(5) -> GENERAL SYSTEM DEFAULTS CONFIGURATION -> MOUNT_WAIT

Default value: `undef`

##### `umount_wait`

Data type: `Optional[Integer]`

See: auto.master(5) -> GENERAL SYSTEM DEFAULTS CONFIGURATION -> MOUNT_WAIT

Default value: `undef`

##### `browse_mode`

Data type: `Boolean`

See: auto.master(5) -> GENERAL SYSTEM DEFAULTS CONFIGURATION -> BROWSE_MODE

Default value: `false`

##### `append_options`

Data type: `Boolean`

See: auto.master(5) -> GENERAL SYSTEM DEFAULTS CONFIGURATION -> APPEND_OPTIONS

Default value: `true`

##### `logging`

Data type: `Autofs::Logging`

See: auto.master(5) -> GENERAL SYSTEM DEFAULTS CONFIGURATION -> LOGGING

Default value: 'none'

##### `ldap_uri`

Data type: `Optional[Array[Simplib::Uri,1]]`

See: auto.master(5) -> LDAP MAPS -> LDAP_TIMEOUT

* Only applies if `$ldap` is `true`.

Default value: `undef`

##### `ldap_timeout`

Data type: `Optional[Integer]`

See: auto.master(5) -> LDAP MAPS -> LDAP_TIMEOUT

* Only applies if `$ldap` is `true`.

Default value: `undef`

##### `ldap_network_timeout`

Data type: `Optional[Integer]`

See: auto.master(5) -> LDAP MAPS -> LDAP_NETWORK_TIMEOUT

* Only applies if `$ldap` is `true`.

Default value: `undef`

##### `search_base`

Data type: `Optional[Array[String,1]]`

See: auto.master(5) -> LDAP MAPS -> SEARCH_BASE

* Only applies if `$ldap` is `true`.

Default value: `undef`

##### `map_object_class`

Data type: `Optional[String]`

See: auto.master(5) -> LDAP MAPS -> MAP_OBJECT_CLASS

* Only applies if `$ldap` is `true`.

Default value: `undef`

##### `entry_object_class`

Data type: `Optional[String]`

See: auto.master(5) -> LDAP MAPS -> ENTRY_OBJECT_CLASS

* Only applies if `$ldap` is `true`.

Default value: `undef`

##### `map_attribute`

Data type: `Optional[String]`

See: auto.master(5) -> LDAP MAPS -> MAP_ATTRIBUTE

* Only applies if `$ldap` is `true`.

Default value: `undef`

##### `entry_attribute`

Data type: `Optional[String]`

See: auto.master(5) -> LDAP MAPS -> ENTRY_ATTRIBUTE

* Only applies if `$ldap` is `true`.

Default value: `undef`

##### `value_attribute`

Data type: `Optional[String]`

See: auto.master(5) -> LDAP MAPS -> VALUE_ATTRIBUTE

* Only applies if `$ldap` is `true`.

Default value: `undef`

##### `map_hash_table_size`

Data type: `Optional[Integer]`

Set the map cache hash table size

* Should be a power of 2 with a ratio roughly between 1:10 and 1:20 for
  each map

Default value: `undef`

##### `automount_use_misc_device`

Data type: `Boolean`

If the kernel supports using the autofs miscellanous device, and you wish
to use it, you must set this configuration option to ``yes`` otherwise it
will not be used

Default value: `true`

##### `automount_options`

Data type: `Optional[String]`

Options to append to the automount application at start time

* See ``automount(8)`` for details

Default value: `undef`

##### `samba_package_ensure`

Data type: `String`

The value to pass to the `ensure` parameter of the `samba-utils` package.
Defaults to `simp_options::package_ensure` or `installed`

Default value: simplib::lookup('simp_options::package_ensure', { 'default_value' => 'installed' })

##### `autofs_package_ensure`

Data type: `String`

The value to pass to the `ensure` parameter of the `autofs` package.
Defaults to `simp_options::package_ensure` or `installed`

Default value: simplib::lookup('simp_options::package_ensure', { 'default_value' => 'installed' })

##### `ldap`

Data type: `Boolean`

Enable LDAP lookups

* Further configuration may need to be made in the `autofs::ldap_auth` class

Default value: simplib::lookup('simp_options::ldap', { 'default_value' => false })

##### `pki`

Data type: `Variant[Enum['simp'],Boolean]`

* If 'simp', include SIMP's pki module and use pki::copy to manage
  application certs in /etc/pki/simp_apps/autofs/x509
* If true, do *not* include SIMP's pki module, but still use pki::copy
  to manage certs in /etc/pki/simp_apps/autofs/x509
* If false, do not include SIMP's pki module and do not use pki::copy
  to manage certs.  You will need to appropriately assign a subset of:
  * app_pki_dir
  * app_pki_key
  * app_pki_cert
  * app_pki_ca
  * app_pki_ca_dir

Default value: simplib::lookup('simp_options::pki', { 'default_value' => false })

##### `master_wait`

Data type: `Optional[Integer]`



Default value: `undef`

##### `mount_verbose`

Data type: `Boolean`



Default value: `false`

##### `mount_nfs_default_protocol`

Data type: `Integer[3,4]`



Default value: 4

##### `force_standard_program_map_env`

Data type: `Boolean`



Default value: `false`

##### `use_hostname_for_mounts`

Data type: `Boolean`



Default value: `false`

##### `disable_not_found_message`

Data type: `Boolean`



Default value: `false`

##### `sss_master_map_wait`

Data type: `Optional[Integer]`



Default value: `undef`

##### `use_mount_request_log_id`

Data type: `Boolean`



Default value: `false`

##### `auth_conf_file`

Data type: `Stdlib::Absolutepath`



Default value: '/etc/autofs_ldap_auth.conf'

##### `custom_autofs_conf_options`

Data type: `Hash`



Default value: {}

##### `master_conf_dir`

Data type: `Stdlib::Absolutepath`



Default value: '/etc/auto.master.simp.d'

##### `master_include_dirs`

Data type: `Array[Stdlib::Absolutepath]`



Default value: [ '/etc/auto.master.d' ]

##### `maps_dir`

Data type: `Stdlib::Absolutepath`



Default value: '/etc/autofs.maps.simp.d'

##### `maps`

Data type: `Hash[String,Autofs::Mapspec]`



Default value: {}

### autofs::config::pki

This class controls all pki related articles for autofs

#### Parameters

The following parameters are available in the `autofs::config::pki` class.

##### `pki`

* If 'simp', include SIMP's pki module and use pki::copy to manage
  application certs in /etc/pki/simp_apps/autofs/x509
* If true, do *not* include SIMP's pki module, but still use pki::copy
  to manage certs in /etc/pki/simp_apps/autofs/x509
* If false, do not include SIMP's pki module and do not use pki::copy
  to manage certs.  You will need to appropriately assign a subset of:
  * app_pki_dir
  * app_pki_key
  * app_pki_cert
  * app_pki_ca
  * app_pki_ca_dir

##### `app_pki_external_source`

Data type: `String`

* If pki = 'simp' or true, this is the directory from which certs will be
  copied, via pki::copy.  Defaults to /etc/pki/simp/x509.

* If pki = false, this variable has no effect.

Default value: simplib::lookup('simp_options::pki::source', { 'default_value' => '/etc/pki/simp/x509' })

##### `app_pki_dir`

Data type: `Stdlib::Absolutepath`

This variable controls the basepath of $app_pki_key, $app_pki_cert,
$app_pki_ca, $app_pki_ca_dir, and $app_pki_crl.
It defaults to /etc/pki/simp_apps/autofs/x509.

Default value: '/etc/pki/simp_apps/autofs/x509'

##### `app_pki_key`

Data type: `Stdlib::Absolutepath`

Path and name of the private SSL key file

Default value: "${app_pki_dir}/private/${::fqdn}.pem"

##### `app_pki_cert`

Data type: `Stdlib::Absolutepath`

Path and name of the public SSL certificate

Default value: "${app_pki_dir}/public/${::fqdn}.pub"

## Defined types

### autofs::map

Creates an autofs::masterfile and an autofs::mapfile resource for $name.

* The auto.master entry will have the default (implied) 'map_type' of 'file'
  and the default (implied) 'map_format' of 'sun' and its file will be
  located in `${autofs::master_conf_dir}`
* The map file will be in 'sun' format and be located in `${autofs::maps_dir}`

#### Parameters

The following parameters are available in the `autofs::map` defined type.

##### `name`

Basename of the map

* Corresponding auto.master entry filename will be
  `${autofs::master_conf_dir}/${name}.autofs`
* Corresponding map file will be named `${autofs::maps_dir}/${name}.map`
* If $name has any whitespace or '/' characters, those characters will be
  replaced with '__' in order to create safe filenames

##### `mount_point`

Data type: `Stdlib::Absolutepath`

Base location for the autofs filesystem to be mounted

* Set to '/-' for direct maps
* Set to a fully-qualified path for indirect mounts
* See auto.master(5) -> FORMAT -> mount-point

##### `master_options`

Data type: `Optional[String]`

Options for `mount` and/or `automount` specified in the auto.master entry file

* See auto.master(5) -> FORMAT -> options

Default value: `undef`

##### `mappings`

Data type: `Variant[Autofs::Directmapping, Array[Autofs::Indirectmapping,1]]`

Single direct mapping or one or more indirect mappings

* Each mapping specifies a key, a location, and any automounter and/or
  mount options.

### autofs::map::entry

Add an entry to the map specified in ``$name``

THIS IS DEPRECATED.  Use `autofs::mapfile` or `autofs::map` instead.

The map file will be created as ``${autofs::maps_dir}/$target.map``.

You will need to create an appropriate ``autofs::masterfile`` entry for
this to be activated.

* **See also**
autofs(5)

#### Parameters

The following parameters are available in the `autofs::map::entry` defined type.

##### `name`

In this case, ``$name`` is mapped to the ``key`` entry as described in
``autofs(5)``

* The special wildcard entry ``*`` is specified by entering the name as
  ``wildcard-<anything_unique>``

##### `target`

Data type: `Optional[String]`

The name (**not the full path**) of the map file under which you would like
this entry placed

* Required unless ``$content`` is set

Default value: `undef`

##### `location`

Data type: `Optional[String]`

The location that should be mounted

* Required unless ``$content`` is set
* This should be the full path on the remote server
    * Example: ``1.2.3.4:/my/files``
* See ``autofs(5)`` for details

Default value: `undef`

##### `options`

Data type: `Optional[String]`

The NFS ``options`` that you would like to add to your map

Default value: `undef`

##### `content`

Data type: `Optional[String]`

Use this content, without validation, ignoring all other options

Default value: `undef`

### autofs::map::master

THIS IS DEPRECATED.  Use `autofs::masterfile` or `autofs::map` instead.

* **See also**
auto.master(5)

#### Parameters

The following parameters are available in the `autofs::map::master` defined type.

##### `mount_point`

Data type: `Optional[Stdlib::Absolutepath]`

See auto.master(5) -> FORMAT -> mount-point

* Required unless ``$content`` is set

Default value: `undef`

##### `map_name`

Data type: `Optional[String]`

See auto.master(5) -> FORMAT -> map

* Required unless ``$content`` is set
* $map_type[file|program]      => Absolute Path
* $map_type[yp|nisplus|hesiod] => String
* $map_type[ldap|ldaps]        => LDAP DN

Default value: `undef`

##### `map_type`

Data type: `Optional[Autofs::Maptype]`

See auto.master(5) -> FORMAT -> map-type

Default value: `undef`

##### `map_format`

Data type: `Optional[Enum['sun','hesiod']]`

See auto.master(5) -> FORMAT -> format

Default value: `undef`

##### `options`

Data type: `Optional[String]`

See auto.master(5) -> FORMAT -> options

Default value: `undef`

##### `content`

Data type: `Optional[String]`

Ignore all other parameters and use this content without validation

Default value: `undef`

### autofs::mapfile

You will need to create an corresponding `autofs::masterfile` entry for this
to be activated.  Alternatively, use `autofs::map`, which will create both
the master entry file and its map file for you.

* **See also**
autofs(5)

#### Examples

##### Create an autofs map file for a direct map

```puppet
autofs::mapfile('apps':
 mappings => {
   'key'      => '/net/apps',
   'options'  => '-fstype=nfs,soft,nfsvers=4,ro',
   'location' => '1.2.3.4:/exports/apps'
 }
```

##### Create an autofs map file for an indirect map with one mapping

```puppet
autofs::mapfile('home':
 mappings => [
   {
     'key'      => '*',
     'options'  => '-fstype=nfs,soft,nfsvers=4,rw',
     'location' => '1.2.3.4:/exports/home/&'
   }
 ]
```

##### Create an autofs map file for an indirect map with mutiple mappings

```puppet
autofs::mapfile('apps':
 mappings => [
   {
     'key'      => 'app1
     'options'  => '-fstype=nfs,soft,nfsvers=4,rw',
     'location' => '1.2.3.4:/exports/app1'
   },
   {
     'key'      => 'app2
     'options'  => '-fstype=nfs,soft,nfsvers=4,rw',
     'location' => '1.2.3.5:/exports/app2'
   }
 ]
```

#### Parameters

The following parameters are available in the `autofs::mapfile` defined type.

##### `name`

Base name of the map excluding the path and the `.map` suffix

* If $name has any whitespace or '/' characters, those characters will be
  replaced with '__' in order to create safe filenames

##### `mappings`

Data type: `Variant[Autofs::Directmapping, Array[Autofs::Indirectmapping,1]]`

Single direct mapping or one or more indirect mappings

* Each mapping specifies a key, a location, and any automounter and/or
  mount options.
* Any change to a direct map will trigger a reload of the autofs service.
  This is not necessary for an indirect map.

##### `maps_dir`

Data type: `Optional[Stdlib::Absolutepath]`

When unset defaults to `autofs::maps_dir`

Default value: `undef`

### autofs::masterfile

This will only create the autofs master entry file.
* If the map type is 'file', you will need to create the map file using
  `autofs::mapfile`.  Alternatively, use `autofs::map` which will create both
  the master entry file and the map file.
* If the map type is 'program', you will need to ensure the specified
  executable is available and has the appropriate permissions.

* **See also**
auto.master(5)

#### Parameters

The following parameters are available in the `autofs::masterfile` defined type.

##### `name`

Base name of the autofs master entry file excluding the path and the
`.autofs` suffix

* If $name has any whitespace or '/' characters, those characters will be
  replaced with '__' in order to create safe filenames

##### `mount_point`

Data type: `Stdlib::Absolutepath`

Base location for the autofs filesystem to be mounted

* Set to '/-' for direct maps
* Set to a fully-qualified path for indirect mounts
* See auto.master(5) -> FORMAT -> mount-point

##### `map`

Data type: `String`

Name of the map to use

* See auto.master(5) -> FORMAT -> map
* Format of this String must match $map_type:

  * $map_type of undef|file|program => Absolute Path
  * $map_type of yp|nisplus|hesiod  => String
  * $map_type of ldap|ldaps         => LDAP DN

##### `map_type`

Data type: `Optional[Autofs::Maptype]`

Type of map used for this mount point

* When unspecified, autofs assumes this is 'file'
* See auto.master(5) -> FORMAT -> map-type

Default value: `undef`

##### `map_format`

Data type: `Optional[Enum['sun','hesiod']]`

Format of the map data

* When unspecified, autofs assumes this is 'sun'
* See auto.master(5) -> FORMAT -> format

Default value: `undef`

##### `options`

Data type: `Optional[String]`

Options for `mount` and/or `automount`

* See auto.master(5) -> FORMAT -> options

Default value: `undef`

## Data types

### Autofs::Authtype

The Autofs::Authtype data type.

Alias of `Enum['GSSAPI', 'LOGIN', 'PLAIN', 'ANONYMOUS', 'DIGEST-MD5', 'EXTERNAL']`

### Autofs::Directmapping

Single direct file system mapping that can be specified in an
autofs map file

#### Examples

##### Direct map without options

```puppet
{ 'key' => '/mnt/apps', location => 'server.example.com:/exports/apps' }
```

##### Direct map with options

```puppet
{ 'key' => '/mnt/apps', options => 'nfsvers=4,ro', location => 'server.example.com:/exports/apps' }
```

Alias of `Struct[{
  key      => Stdlib::Absolutepath,
  options  => Optional[Pattern[/\A\S+\z/]], # non empty string
  location => Pattern[/\S/]                 # contains at least 1 non-whitespace char
}]`

### Autofs::Indirectmapping

Single indirect file system mapping that can be specified in an
autofs map file

#### Examples

##### Indirect map without options

```puppet
{ 'key' => 'data', location => 'server.example.com:/exports/data' }
```

##### Indirect map with options

```puppet
{ 'key' => '*', options => 'soft,rw', location => 'server.example.com:/exports/home/&' }
```

Alias of `Struct[{
  key      => Pattern[/\A[^\s\/]+\z/],      # non empty string excluding /
  options  => Optional[Pattern[/\A\S+\z/]], # non empty string
  location => Pattern[/\S/]                 # contains at least 1 non-whitespace char
}]`

### Autofs::Logging

automounter log level

Alias of `Enum['none', 'verbose', 'debug']`

### Autofs::Mapspec

Specification for parameters needed to create an autofs::map

Alias of `Struct[{
  mount_point    => Stdlib::Absolutepath,
  master_options => Optional[String],
  mappings       => Variant[Autofs::Directmapping, Array[Autofs::Indirectmapping,1]]
}]`

### Autofs::Maptype

Map type for an auto.master entry

Alias of `Enum['file', 'program', 'yp', 'nisplus', 'hesiod', 'ldap', 'ldaps', 'multi']`

